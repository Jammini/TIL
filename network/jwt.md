# JWT(JSON Web Token)λ€?

### λ©μ°¨

1. [JWTλ€?](#1-jwtλ€)
2. [JWT μ‚¬μ©μ‹κΈ°](#2-jwt-μ‚¬μ©μ‹κΈ°)
3. [JWTκµ¬μ΅°](#3-jwtκµ¬μ΅°)
4. [JWT μ΄μ©ν• μΈμ¦ κ³Όμ •](#4-jwt-μ΄μ©ν•-μΈμ¦-κ³Όμ •)
5. [JWT μ¥μ ](#5-jwt-μ¥μ )

### 1. JWTλ€?

- JWT(JSON Web Token)λ€Β **μΈμ¦μ— ν•„μ”ν• μ •λ³΄λ“¤μ„ μ•”νΈν™”μ‹ν‚¨ JSON ν† ν°**
μ„ μλ―Έν•λ‹¤. κ·Έλ¦¬κ³  JWT κΈ°λ° μΈμ¦μ€Β JWT ν† ν°(Access Token)μ„ HTTP ν—¤λ”μ— μ‹¤μ–΄ μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈλ¥Ό μ‹λ³„ν•λ” λ°©μ‹μ΄λ‹¤
- JWTλ” JSON λ°μ΄ν„°λ¥ΌΒ Base64 URL-safe EncodeΒ λ¥Ό ν†µν•΄ μΈμ½”λ”©ν•μ—¬ μ§λ ¬ν™”ν• κ²ƒμ΄λ©°, ν† ν° λ‚΄λ¶€μ—λ” μ„λ³€μ΅° λ°©μ§€λ¥Ό μ„ν•΄ κ°μΈν‚¤λ¥Ό ν†µν•Β **μ „μμ„λ…**λ„ λ“¤μ–΄μλ‹¤. λ”°λΌμ„ μ‚¬μ©μκ°€ JWT λ¥Ό μ„λ²„λ΅ μ „μ†΅ν•λ©΄ μ„λ²„λ” μ„λ…μ„ κ²€μ¦ν•λ” κ³Όμ •μ„ κ±°μΉκ² λλ©° κ²€μ¦μ΄ μ™„λ£λλ©΄ μ”μ²­ν• μ‘λ‹µμ„ λλ ¤μ¤€λ‹¤.

### 2. ****JWT μ‚¬μ©μ‹κΈ°****

1. Authorization

JWTλ¥Ό μ‚¬μ©ν•λ” κ°€μ¥ μΌλ°μ μΈ μμ‹λ‹¤.

μ‚¬μ©μκ°€ λ΅κ·ΈμΈ ν• ν›„ κ° μ”μ²­μ—λ” JWTλ¥Ό ν¬ν•¨ν•μ—¬ μ‚¬μ©μκ°€ ν•΄λ‹Ή ν† ν°μΌλ΅ ν—μ©λ κ²½λ΅, μ„λΉ„μ¤ λ° λ¦¬μ†μ¤μ— μ•΅μ„Έμ¤ν•  μ μκ² ν•λ‹¤.

1.  Information Exchange

JWTλ” ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„μ— μ •λ³΄λ¥Ό μ•μ „ν•κ² μ „μ†΅ν•λ” μΆ‹μ€ λ°©λ²•μ΄λ‹¤.

μλ¥Ό λ“¤μ–΄ κ³µκ°/κ°μΈ ν‚¤ μμ„ μ‚¬μ©ν•μ—¬ JWTμ— μ„λ…ν•  μ μμΌλ―€λ΅ λ³΄λ‚Έ μ‚¬λμ΄ λ„κµ¬μΈμ§€ ν™•μΈν•  μ μλ‹¤.Β λν• headerμ™€ payloadλ¥Ό μ‚¬μ©ν•μ—¬ μ„λ…μ„ κ³„μ‚°ν•λ―€λ΅ μ½ν…μΈ κ°€ λ³€μ΅°λμ§€ μ•μ•μμ„ ν™•μΈν•  μλ„ μλ‹¤.

### 3. JWTκµ¬μ΅°

JWTλ”Β ( **.**Β )μΌλ΅ κµ¬λ¶„λ μ„Έ λ¶€λ¶„μΌλ΅ κµ¬μ„±λλ‹¤.

1. Header
2. Payload
3. Signature

![image](https://user-images.githubusercontent.com/59176149/231497925-5b86d252-529d-4127-a27a-379a945fb992.png)

1. Header

ν—¤λ”λ”Β *μΌλ°μ μΌλ΅*Β ν† ν° μ ν•(JWT)κ³Ό μ‚¬μ© μ¤‘μΈ μ„λ… μ•κ³ λ¦¬μ¦μ λ‘ λ¶€λ¶„μΌλ΅ κµ¬μ„±λλ‹¤.

- alg :Β μ„λ… μ•”νΈν™” μ•κ³ λ¦¬μ¦(ex: HMAC SHA256, RSA)
- typ :Β ν† ν° μ ν•
1. Payload

ν† ν°μ—μ„ μ‚¬μ©ν•  μ •λ³΄μ μ΅°κ°λ“¤μΈ Claim μ΄ λ‹΄κ²¨μλ‹¤. (μ‹¤μ  JWT λ¥Ό ν†µν•΄μ„ μ• μ μλ” λ°μ΄ν„°)

μ¦‰, μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈκ°€ μ£Όκ³ λ°›λ” μ‹μ¤ν…μ—μ„ μ‹¤μ λ΅Β **μ‚¬μ©λ  μ •λ³΄μ— λ€ν• λ‚΄μ©**μ„ λ‹΄κ³  μλ” μ„Ήμ…μ΄λ‹¤.

*ν΄λ μ„μ—λ” Registered claims, Public claims, Private claims*Β μ μ„Έ κ°€μ§€ μ ν•μ΄ μμµλ‹λ‹¤ .

2-1. Registed claims : λ―Έλ¦¬ μ •μλ ν΄λ μ„.

- iss(issuer; λ°ν–‰μ),
- exp(expireation time; λ§λ£ μ‹κ°„),
- sub(subject; μ λ©),
- iat(issued At; λ°ν–‰ μ‹κ°„),
- jti(JWI ID)

2-2. Public claims : μ‚¬μ©μκ°€ μ •μν•  μ μλ” ν΄λ μ„ κ³µκ°μ© μ •λ³΄ μ „λ‹¬μ„ μ„ν•΄ μ‚¬μ©.

2-3. Private claims : ν•΄λ‹Ήν•λ” λ‹Ήμ‚¬μλ“¤ κ°„μ— μ •λ³΄λ¥Ό κ³µμ ν•κΈ° μ„ν•΄ λ§λ“¤μ–΄μ§„ μ‚¬μ©μ μ§€μ • ν΄λ μ„. μ™Έλ¶€μ— κ³µκ°λλ„ μƒκ΄€μ—†μ§€λ§ ν•΄λ‹Ή μ μ €λ¥Ό νΉμ •ν•  μ μλ” μ •λ³΄λ“¤μ„ λ‹΄λ”λ‹¤

1. Signature

μ‹κ·Έλ‹μ²μ—μ„ μ‚¬μ©ν•λ” μ•κ³ λ¦¬μ¦μ€ ν—¤λ”μ—μ„ μ •μν• μ•κ³ λ¦¬μ¦ λ°©μ‹(alg)μ„ ν™μ©ν•λ‹¤.

μ‹κ·Έλ‹μ²μ κµ¬μ΅°λ” (ν—¤λ” + νμ΄λ΅λ“)μ™€ μ„λ²„κ°€ κ°–κ³  μλ” μ μΌν• key κ°’μ„ ν•©μΉ κ²ƒμ„ ν—¤λ”μ—μ„ μ •μν• μ•κ³ λ¦¬μ¦μΌλ΅ μ•”νΈν™”λ¥Ό ν•λ‹¤.

![image](https://user-images.githubusercontent.com/59176149/231497984-9d6bbd8c-123d-45de-9d18-790f29a40ffb.png)

μλ¥Ό λ“¤μ–΄ ν—¤λ”μ—μ„ HMAC SHA256 μ•κ³ λ¦¬μ¦μ„ μ‚¬μ©ν•λ‹¤κ³  μ§€μ •μ„ ν–μΌλ©΄ μ‹κ·Έλ‹μ²λ” λ‹¤μκ³Ό κ°™λ‹¤.

```
HMACSHA256(
  base64UrlEncode(header) + "." +
  base64UrlEncode(payload),
  secret)
```

λ§μ§€λ§‰μ— λ¶™λ” secretμ€ μ„λ²„κ°€ κ°–κ³  μλ” key κ°’μ΄λ‹¤.

### 4. JWT μ΄μ©ν• μΈμ¦ κ³Όμ •

![image](https://user-images.githubusercontent.com/59176149/231498047-87f14077-e5d7-4a44-8002-2b4e4a4f59c5.png)

1. μ‚¬μ©μκ°€ ID, PWλ¥Ό μ…λ ¥ν•μ—¬ μ„λ²„μ— λ΅κ·ΈμΈ μΈμ¦μ„ μ”μ²­ν•λ‹¤.
2. μ„λ²„μ—μ„ ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° μΈμ¦ μ”μ²­μ„ λ°›μΌλ©΄, Header, PayLoad, Signatureλ¥Ό μ •μν•λ‹¤.Hedaer, PayLoad, Signatureλ¥Ό κ°κ° Base64λ΅ ν• λ² λ” μ•”νΈν™”ν•μ—¬ JWTλ¥Ό μƒμ„±ν•κ³  μ΄λ¥Ό μΏ ν‚¤μ— λ‹΄μ•„ ν΄λΌμ΄μ–ΈνΈμ—κ² λ°κΈ‰ν•λ‹¤.
3. ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„λ΅λ¶€ν„° λ°›μ€ JWTλ¥Ό λ΅μ»¬ μ¤ν† λ¦¬μ§€μ— μ €μ¥ν•λ‹¤. (μΏ ν‚¤λ‚ λ‹¤λ¥Έ κ³³μ— μ €μ¥ν•  μλ„ μμ)APIλ¥Ό μ„λ²„μ— μ”μ²­ν• λ•Β **Authorization headerμ— Access Tokenμ„ λ‹΄μ•„**μ„ λ³΄λ‚Έλ‹¤.
4. μ„λ²„κ°€ ν•  μΌμ€ ν΄λΌμ΄μ–ΈνΈκ°€ Headerμ— λ‹΄μ•„μ„ λ³΄λ‚Έ JWTκ°€ λ‚΄ μ„λ²„μ—μ„ λ°ν–‰ν• ν† ν°μΈμ§€ μΌμΉ μ—¬λ¶€λ¥Ό ν™•μΈν•μ—¬ μΌμΉν•λ‹¤λ©΄ μΈμ¦μ„ ν†µκ³Όμ‹μΌμ£Όκ³  μ•„λ‹λΌλ©΄ ν†µκ³Όμ‹ν‚¤μ§€ μ•μΌλ©΄ λλ‹¤.μΈμ¦μ΄ ν†µκ³Όλμ—μΌλ―€λ΅ νμ΄λ΅λ“μ— λ“¤μ–΄μλ” μ μ €μ μ •λ³΄λ“¤μ„ selectν•΄μ„ ν΄λΌμ΄μ–ΈνΈμ— λλ ¤μ¤€λ‹¤.
5. ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ— μ”μ²­μ„ ν–λ”λ°, λ§μΌ μ•΅μ„Έμ¤ ν† ν°μ μ‹κ°„μ΄ λ§λ£λλ©΄ ν΄λΌμ΄μ–ΈνΈλ” λ¦¬ν”„λμ‹ ν† ν°μ„ μ΄μ©ν•΄μ„
6. μ„λ²„λ΅λ¶€ν„° μƒλ΅μ΄ μ—‘μ„Έμ¤ ν† ν°μ„ λ°κΈ‰ λ°›λ”λ‹¤.

### 5. JWT μ¥μ 

- Headerμ™€ Payloadλ¥Ό κ°€μ§€κ³  Signatureλ¥Ό μƒμ„±ν•λ―€λ΅ **λ°μ΄ν„° μ„λ³€μ΅°λ¥Ό λ§‰μ„ μ μλ‹¤.**
- μΈμ¦ μ •λ³΄μ— λ€ν• **λ³„λ„μ μ €μ¥μ†κ°€ ν•„μ”μ—†λ‹¤.**
- JWTλ” ν† ν°μ— λ€ν• κΈ°λ³Έ μ •λ³΄μ™€ μ „λ‹¬ν•  μ •λ³΄ λ° ν† ν°μ΄ κ²€μ¦λμ—μμ„ μ¦λ…ν•λ” μ„λ… λ“± ν•„μ”ν• λ¨λ“  μ •λ³΄λ¥Ό μμ²΄μ μΌλ΅ μ§€λ‹κ³  μλ‹¤.
- ν΄λΌμ΄μ–ΈνΈ μΈμ¦ μ •λ³΄λ¥Ό μ €μ¥ν•λ” μ„Έμ…κ³Ό λ‹¤λ¥΄κ²,Β κ°€ λμ–΄ μ„λ²„ ν™•μ¥μ„±μ΄ μ°μν•΄μ§ μ μλ‹¤. **μ„λ²„λ” λ¬΄μƒνƒ(StateLess)**
- ν† ν° κΈ°λ°μΌλ΅ **λ‹¤λ¥Έ λ΅κ·ΈμΈ μ‹μ¤ν…μ— μ ‘κ·Ό λ° κ¶ν• κ³µμ κ°€ κ°€λ¥ν•λ‹¤. (μΏ ν‚¤μ™€ μ°¨μ΄)**
- OAuthμ κ²½μ° Facebook, Google λ“± μ†μ… κ³„μ •μ„ μ΄μ©ν•μ—¬ λ‹¤λ¥Έ μ›Ήμ„λΉ„μ¤μ—μ„λ„ λ΅κ·ΈμΈμ„ ν•  μ μλ‹¤.

### μ°Έκ³ 

- [https://jwt.io/introduction](https://jwt.io/introduction)
- [https://cbw1030.tistory.com/331](https://cbw1030.tistory.com/331)
- [https://inpa.tistory.com/entry/WEB-π“-JWTjson-web-token-λ€-π’―-μ •λ¦¬](https://inpa.tistory.com/entry/WEB-%F0%9F%93%9A-JWTjson-web-token-%EB%9E%80-%F0%9F%92%AF-%EC%A0%95%EB%A6%AC)
